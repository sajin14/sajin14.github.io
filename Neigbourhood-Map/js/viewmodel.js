var flag=ko.observable(0),hideMarkers=[],viewModel={selectedOption:ko.observable(),results:ko.observableArray([]),currentmarker:ko.observable(markers[0]),infoWindow:ko.observable()};viewModel.initialize=function(){view.initMap(),view.initialize(locations),this.showPanel()},viewModel.show=function(){flag(1),this.filter(),view.showlistings(),view.hidelistings(),this.showPanel()},viewModel.filter=function(){for(hideMarkers.length=0,i=0;i<locations.length;i++)this.selectedOption()!=locations[i].type&&hideMarkers.push(i)},viewModel.reset=function(){flag(0),view.showlistings(),this.showPanel()},viewModel.info=function(e){viewModel.currentmarker(view.getMarker(e)),viewModel.infoWindow(view.getInfoWindow()),view.populateInfoWindow(viewModel.currentmarker(),viewModel.infoWindow(),e)},viewModel.showPanel=function(){this.results().length=0;var e;if(0===flag())for(e=0;e<locations.length;e++)this.results.push(locations[e]);else for(e=0;e<locations.length;e++)this.selectedOption()==locations[e].type&&this.results.push(locations[e])},error=function(){alert("Error loading Google Maps")},ko.applyBindings(viewModel);